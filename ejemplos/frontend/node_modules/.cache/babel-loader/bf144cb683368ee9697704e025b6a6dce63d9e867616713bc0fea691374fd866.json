{"ast":null,"code":"import _regeneratorRuntime from\"/home/milton/Documentos/Tutoria2023/ejemplos/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/milton/Documentos/Tutoria2023/ejemplos/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/milton/Documentos/Tutoria2023/ejemplos/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Form(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categorias=_useState2[0],setCategoria=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),change=_useState4[0],setChange=_useState4[1];var _useState5=useState(-1),_useState6=_slicedToArray(_useState5,2),id=_useState6[0],setId=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];useEffect(function(){function load(){return _load.apply(this,arguments);}function _load(){_load=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:3001/api/categoria');case 2:res=_context.sent;setCategoria(res.data);case 4:case\"end\":return _context.stop();}},_callee);}));return _load.apply(this,arguments);}load();},[change]);function onDelete(_x){return _onDelete.apply(this,arguments);}function _onDelete(){_onDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"http://localhost:3001/api/categoria/delete/\".concat(id));case 3:res=_context2.sent;alert('Eliminado correctamente');setChange(!change);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);alert('Error al eliminar');case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return _onDelete.apply(this,arguments);}function setData(id,name){setId(id);setName(name);}function onUpdate(_x2){return _onUpdate.apply(this,arguments);}function _onUpdate(){_onUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:e.preventDefault();console.log(id);console.log(name);alert(\"TODO: update name to \".concat(name));case 4:case\"end\":return _context3.stop();}},_callee3);}));return _onUpdate.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5 justify-content-center align-middle mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Resultado\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-center\",children:\"Update\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"text-center\",children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:categorias.map(function(categoria){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:categoria.name}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center align-middle\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-warning btn-sm m-1\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#update\",onClick:function onClick(){return setData(categoria._id,categoria.name);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil-square\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center align-middle\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-warning btn-sm m-1\",onClick:function onClick(){return onDelete(categoria._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x-lg\"})})})]},categoria._id);})})]})})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",id:\"update\",tabIndex:\"-1\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"modal-title fs-5\",id:\"exampleModalLabel\",children:\"Modal title\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",\"data-bs-dismiss\":\"modal\",\"aria-label\":\"Close\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"f1\",className:\"form-label\",children:\"Nombre de la categoria\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"f1\",autoComplete:\"off\",onChange:function onChange(e){return setName(e.target.value);},value:name})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2 mt-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#update\",onClick:onUpdate,children:\"Guardar\"})})]})})]})})})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Form","props","_useState","_useState2","_slicedToArray","categorias","setCategoria","_useState3","_useState4","change","setChange","_useState5","_useState6","id","setId","_useState7","_useState8","name","setName","load","_load","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","get","sent","data","stop","onDelete","_x","_onDelete","_callee2","_callee2$","_context2","delete","concat","alert","t0","setData","onUpdate","_x2","_onUpdate","_callee3","e","_callee3$","_context3","preventDefault","console","log","children","className","scope","map","categoria","type","onClick","_id","tabIndex","htmlFor","autoComplete","onChange","target","value"],"sources":["/home/milton/Documentos/Tutoria2023/ejemplos/frontend/src/components/view2.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from 'axios'\n\nexport default function Form(props) {\n    const [categorias, setCategoria] = useState([])\n    const [change, setChange] = useState(false)\n    const [id, setId] = useState(-1)\n    const [name, setName] = useState('')\n\n    useEffect(() => {\n        async function load() {\n            let res = await axios.get('http://localhost:3001/api/categoria')\n            setCategoria(res.data)\n        }\n        load()\n    }, [change])\n\n    async function onDelete(id) {\n        try {\n            let res = await axios.delete(`http://localhost:3001/api/categoria/delete/${id}`)\n            alert('Eliminado correctamente')\n            setChange(!change)\n        } catch (error) {\n            alert('Error al eliminar')\n        }\n    }\n\n    function setData(id, name) {\n        setId(id)\n        setName(name)\n    }\n\n    async function onUpdate(e) {\n        e.preventDefault()\n        console.log(id)\n        console.log(name)\n        alert(`TODO: update name to ${name}`)\n    }\n\n    return (\n        <div>\n            <div className=\"container\">\n                <div className=\"row mt-5 justify-content-center align-middle mb-5\">\n                    <div className=\"col-8\">\n                        <div className=\"card\">\n                            <div className=\"card-body\">\n                                <table className=\"table\">\n                                    <thead>\n                                        <tr>\n                                            <th scope=\"col\">Resultado</th>\n                                            <th scope=\"col\" className=\"text-center\">Update</th>\n                                            <th scope=\"col\" className=\"text-center\">Delete</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {\n                                            categorias.map(categoria =>\n                                                <tr key={categoria._id}>\n                                                    <td>\n                                                        {categoria.name}\n                                                    </td>\n                                                    <td className=\"text-center align-middle\">\n                                                        <button type=\"button\" className=\"btn btn-warning btn-sm m-1\" data-bs-toggle=\"modal\" data-bs-target=\"#update\" onClick={() => setData(categoria._id, categoria.name)}>\n                                                            <i className=\"bi bi-pencil-square\"></i>\n                                                        </button>\n                                                    </td>\n                                                    <td className=\"text-center align-middle\">\n                                                        <button type=\"button\" className=\"btn btn-warning btn-sm m-1\" onClick={() => onDelete(categoria._id)}>\n                                                            <i className=\"bi bi-x-lg\"></i>\n                                                        </button>\n                                                    </td>\n                                                </tr>\n                                            )\n                                        }\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className=\"modal fade\" id=\"update\" tabIndex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                <div className=\"modal-dialog\">\n                    <div className=\"modal-content\">\n                        <div className=\"modal-header\">\n                            <h1 className=\"modal-title fs-5\" id=\"exampleModalLabel\">Modal title</h1>\n                            <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                        </div>\n                        <div className=\"modal-body\">\n                            <form>\n                                <div className=\"row g-3\">\n                                    <div className=\"col-6\">\n                                        <label htmlFor=\"f1\" className=\"form-label\">Nombre de la categoria</label>\n                                    </div>\n                                    <div className=\"col-6\">\n                                        <input type=\"text\" className=\"form-control\" id=\"f1\" autoComplete=\"off\" onChange={e => setName(e.target.value)} value={name} />\n                                    </div>\n                                </div>\n                                <div className=\"d-grid gap-2 mt-3\">\n                                    <button className=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#update\" onClick={onUpdate}>Guardar</button>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}