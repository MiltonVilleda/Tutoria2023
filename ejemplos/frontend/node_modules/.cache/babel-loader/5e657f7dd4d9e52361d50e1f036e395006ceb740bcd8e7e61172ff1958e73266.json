{"ast":null,"code":"var _jsxFileName = \"/home/milton/Documentos/Tutoria2023/ejemplos/frontend/src/components/bills.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport pdfMake from \"pdfmake/build/pdfmake\";\nimport pdfFonts from \"pdfmake/build/vfs_fonts\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Bills(props) {\n  _s();\n  const [bills, setBills] = useState([]);\n  const [change, setChange] = useState(false);\n  pdfMake.vfs = pdfFonts.pdfMake.vfs;\n\n  //get user info\n  useEffect(() => {\n    async function getToken() {\n      try {\n        let token = localStorage.getItem('token');\n        let res = await axios.get(`http://localhost:3001/clase1/login/getToken?token=${token}`);\n        let token_result = res.data.data;\n        let res3 = await axios.get(`http://localhost:3001/clase1/user/bills/${token_result.id}`);\n        setBills(res3.data);\n      } catch (error) {\n        alert('error user');\n      }\n    }\n    getToken();\n  }, [change]);\n  function print() {\n    console.log(bills);\n  }\n  function generatePdf(bill) {\n    let body = [[{\n      text: 'Descripcion',\n      style: 'tableHeader',\n      colSpan: 4\n    }, {}, {}, {}], [{\n      text: 'Cantidad',\n      alignment: 'center'\n    }, {\n      text: 'Producto',\n      alignment: 'center'\n    }, {\n      text: 'Precio',\n      alignment: 'center'\n    }, {\n      text: 'Subtotal',\n      alignment: 'center'\n    }]];\n    for (let item of bill.productos) {\n      body.push([{\n        text: item.cantidad,\n        alignment: 'center'\n      }, `${item.name} - ${item.marca}`, {\n        text: item.precio,\n        alignment: 'center'\n      }, {\n        text: item.sub_total,\n        alignment: 'center'\n      }]);\n    }\n    body.push([{\n      text: 'Total',\n      style: 'tableHeader',\n      colSpan: 3\n    }, {}, {}, {\n      text: bill.total,\n      alignment: 'center'\n    }]);\n    let dd = {\n      content: [{\n        text: 'Factura',\n        style: 'header',\n        alignment: 'center'\n      }, {\n        text: `No Factura: ${bill._id}`,\n        style: 'subheader2'\n      }, {\n        text: `Fecha: ${bill.fecha.split('T')[0]}`,\n        style: 'subheader2'\n      }, {\n        columns: [{\n          style: 'tableExample',\n          table: {\n            body: body,\n            widths: ['*', 'auto', 100, '*']\n          }\n        }]\n      }],\n      styles: {\n        header: {\n          fontSize: 22,\n          bold: true,\n          margin: [0, 0, 0, 10]\n        },\n        subheader: {\n          fontSize: 16,\n          bold: true,\n          margin: [0, 10, 0, 5]\n        },\n        subheader2: {\n          fontSize: 14,\n          bold: false,\n          margin: [0, 3, 0, 3]\n        },\n        tableExample: {\n          margin: [0, 5, 0, 15]\n        },\n        tableHeader: {\n          alignment: 'center',\n          margin: [70, 0, 70, 0]\n        }\n      }\n    };\n    //pdfMake.createPdf(dd).download()\n    pdfMake.createPdf(dd).open();\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mt-5 justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-center\",\n              children: \"Facturas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-group\",\n              children: bills.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"list-group-item d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-left\",\n                  children: [x.fecha.split('T')[0], \" | Total: \", x.total, \" | Productos: \", x.productos.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => generatePdf(x),\n                  className: \"btn btn-primary btn-sm\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"bi bi-eye\",\n                    children: \" Ver factura\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 45\n                }, this)]\n              }, x._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n}\n_s(Bills, \"QjkDAn698qrmTNGi5W+P/mWk3b8=\");\n_c = Bills;\nvar _c;\n$RefreshReg$(_c, \"Bills\");","map":{"version":3,"names":["React","useEffect","useState","pdfMake","pdfFonts","axios","jsxDEV","_jsxDEV","Bills","props","_s","bills","setBills","change","setChange","vfs","getToken","token","localStorage","getItem","res","get","token_result","data","res3","id","error","alert","print","console","log","generatePdf","bill","body","text","style","colSpan","alignment","item","productos","push","cantidad","name","marca","precio","sub_total","total","dd","content","_id","fecha","split","columns","table","widths","styles","header","fontSize","bold","margin","subheader","subheader2","tableExample","tableHeader","createPdf","open","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","x","length","onClick","_c","$RefreshReg$"],"sources":["/home/milton/Documentos/Tutoria2023/ejemplos/frontend/src/components/bills.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport pdfMake from \"pdfmake/build/pdfmake\";\nimport pdfFonts from \"pdfmake/build/vfs_fonts\";\nimport axios from 'axios'\n\nexport default function Bills(props) {\n\n    const [bills, setBills] = useState([])\n    const [change, setChange] = useState(false)\n    pdfMake.vfs = pdfFonts.pdfMake.vfs\n\n    //get user info\n    useEffect(() => {\n        async function getToken() {\n            try {\n                let token = localStorage.getItem('token')\n                let res = await axios.get(`http://localhost:3001/clase1/login/getToken?token=${token}`)\n                let token_result = res.data.data\n                let res3 = await axios.get(`http://localhost:3001/clase1/user/bills/${token_result.id}`)\n                setBills(res3.data)\n            } catch (error) {\n                alert('error user')\n            }\n        }\n        getToken()\n    }, [change])\n\n    function print() {\n        console.log(bills)\n    }\n\n    function generatePdf(bill) {\n        let body = [\n            [{ text: 'Descripcion', style: 'tableHeader', colSpan: 4 }, {}, {}, {}],\n            [\n                { text: 'Cantidad', alignment: 'center' },\n                { text: 'Producto', alignment: 'center' },\n                { text: 'Precio', alignment: 'center' },\n                { text: 'Subtotal', alignment: 'center' },\n            ]\n        ]\n        for (let item of bill.productos) {\n            body.push(\n                [\n                    { text: item.cantidad, alignment: 'center' },\n                    `${item.name} - ${item.marca}`,\n                    { text: item.precio, alignment: 'center' },\n                    { text: item.sub_total, alignment: 'center' },\n                ]\n            )\n        }\n        body.push([{ text: 'Total', style: 'tableHeader', colSpan: 3 }, {}, {}, { text: bill.total, alignment: 'center' }])\n        let dd = {\n            content: [\n                { text: 'Factura', style: 'header', alignment: 'center' },\n                { text: `No Factura: ${bill._id}`, style: 'subheader2' },\n                { text: `Fecha: ${bill.fecha.split('T')[0]}`, style: 'subheader2' },\n                {\n                    columns: [\n                        {\n                            style: 'tableExample',\n                            table: {\n                                body: body,\n                                widths: ['*', 'auto', 100, '*']\n                            }\n                        }\n                    ]\n                }\n            ],\n            styles: {\n                header: {\n                    fontSize: 22,\n                    bold: true,\n                    margin: [0, 0, 0, 10]\n                },\n                subheader: {\n                    fontSize: 16,\n                    bold: true,\n                    margin: [0, 10, 0, 5]\n                },\n                subheader2: {\n                    fontSize: 14,\n                    bold: false,\n                    margin: [0, 3, 0, 3]\n                },\n                tableExample: {\n                    margin: [0, 5, 0, 15]\n                },\n                tableHeader: {\n                    alignment: 'center',\n                    margin: [70, 0, 70, 0]\n                }\n            }\n        }\n        //pdfMake.createPdf(dd).download()\n        pdfMake.createPdf(dd).open()\n    }\n\n    return (\n        <div className=\"container\">\n            <div className=\"row mt-5 justify-content-center\">\n                <div className=\"col-8\">\n                    <div className=\"card\">\n                        <div className=\"card-header\">\n                            <h1 className=\"text-center\">Facturas</h1>\n                        </div>\n                        <div className=\"card-body\">\n                            <ul className=\"list-group\">\n                                {\n                                    bills.map(x =>\n                                        <li key={x._id} className=\"list-group-item d-flex justify-content-between\">\n                                            <p className=\"text-left\">\n                                                {x.fecha.split('T')[0]} | Total: {x.total} | Productos: {x.productos.length}\n                                            </p>\n                                            <button onClick={() => generatePdf(x)} className=\"btn btn-primary btn-sm\">\n                                                <i className=\"bi bi-eye\"> Ver factura</i>\n                                            </button>\n                                        </li>\n                                    )\n                                }\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}